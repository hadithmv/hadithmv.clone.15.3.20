<!doctype html>
<!-- <html dir="rtl"> -->
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>ނަވަވީގެ ސާޅީސް ޙަދީޘް</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link
      href="https://nightly.datatables.net/css/dataTables.dataTables.css"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://nightly.datatables.net/js/dataTables.js"></script>
    <!-- -->
    <link
      href="https://cdn.datatables.net/plug-ins/2.1.2/features/inputPaging/dist/dataTables.inputPaging.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://cdn.datatables.net/plug-ins/2.1.2/features/inputPaging/dist/dataTables.inputPaging.min.js"></script>
    <!-- -->
    <link
      href="https://cdn.datatables.net/buttons/3.1.0/css/buttons.dataTables.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.datatables.net/buttons/3.1.0/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.1.0/js/buttons.colVis.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.1.0/js/buttons.html5.min.js"></script>
    <!-- -->
    <link
      href="https://cdn.datatables.net/searchbuilder/1.7.1/css/searchBuilder.dataTables.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.datatables.net/searchbuilder/1.7.1/js/dataTables.searchBuilder.min.js"></script>
    <!-- searchpanes requires select too -->
    <link
      href="https://cdn.datatables.net/searchpanes/2.3.1/css/searchPanes.dataTables.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.datatables.net/searchpanes/2.3.1/js/dataTables.searchPanes.min.js"></script>
    <link
      href="https://cdn.datatables.net/select/2.0.3/css/select.dataTables.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.datatables.net/select/2.0.3/js/dataTables.select.min.js"></script>
    <!-- -->
    <link
      href="https://cdn.datatables.net/keytable/2.12.1/css/keyTable.dataTables.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.datatables.net/keytable/2.12.1/js/dataTables.keyTable.min.js"></script>
    <!-- -->
    <!--
    <script src="arrays.js"></script> -->
    <script src="json/fortyNawawi.js"></script>
    <!-- -->
    <!-- -->
    <!-- card styles
         https://datatables.net/forums/discussion/comment/228301/#Comment_228301 -->
    <style>
      /* ORIGINAL CARDS CSS */
      .cards tbody tr {
        /* float: left; removing this used to center, now using flexbox instead */
        /*width: 20rem; this narrows the columns too much*/
        margin: 0.5rem;
        border: 0.0625rem solid rgba(0, 0, 0, 0.125);
        border-radius: 0.25rem;
        /*box-shadow: 0.25rem 0.25rem 0.5rem rgba(0, 0, 0, 0.25);*/
      }
      .cards tbody td {
        display: block;
      }
      /* ORIGINAL CARDS CSS  END */
      /* */
      /* */
      /* added this to make it one column and centered, it was already centered after colspans were removed */
      .cards tbody {
        display: flex;
        flex-direction: column;
        align-items: stretch; /* center */
      }
      /* removes th table header above columns, for card view */
      thead {
        display: none;
      }
      /* removes colgroup cols except the first one, for card view */
      #example > colgroup > col:not(:nth-child(0)) {
        display: none;
      }
      /* remove thin border lines above and below rows of td */
      #example > tbody > tr > td {
        border: none;
      }
      /* right to left https://datatables.net/examples/i18n/rtl.html */
      .dt-container {
        direction: rtl;
      }
      /* */
    </style>
  </head>
  <body>
    <div class="container">
      <!-- cards class,  dir="rtl" -->
      <table id="example" class="display cards" width="100%"></table>
    </div>
    <script type="text/javascript">
      let table;
      let isSwipeHandlerInitialized = false;

      DataTable.defaults.layout = {
        topStart: null,
        topEnd: null,
        bottomStart: null,
        bottomEnd: null,
      };

      function initializeDataTable() {
        const isMobile = window.innerWidth <= 800;

        const desktopConfig = {
          layout: {
            top: ["search", "pageLength"],
          },
        };

        const mobileConfig = {
          layout: {
            top: ["search", "inputPaging"],
          },
        };

        const config = isMobile ? mobileConfig : desktopConfig;

        table = new DataTable("#example", {
          ...config,
          columns: [null, null, null, null, null, null, null],
          data: data,

          drawCallback: handleDrawCallback,
        });

        if (isMobile && !isSwipeHandlerInitialized) {
          initializeSwipeHandler();
          isSwipeHandlerInitialized = true;
        } else if (!isMobile && isSwipeHandlerInitialized) {
          removeSwipeHandler();
          isSwipeHandlerInitialized = false;
        }
      }

      initializeDataTable();

      window.addEventListener("resize", function () {
        table.destroy();
        initializeDataTable();
      });

      function initializeSwipeHandler() {
        let startX;
        const tableElement = document.getElementById("example");

        tableElement.addEventListener("touchstart", onTouchStart, {
          passive: true,
        });
        tableElement.addEventListener("touchend", onTouchEnd, {
          passive: true,
        });
      }

      function removeSwipeHandler() {
        const tableElement = document.getElementById("example");

        tableElement.removeEventListener("touchstart", onTouchStart);
        tableElement.removeEventListener("touchend", onTouchEnd);
      }

      function onTouchStart(e) {
        startX = e.touches[0].clientX;
      }

      function onTouchEnd(e) {
        const endX = e.changedTouches[0].clientX;
        const diffX = startX - endX;

        if (Math.abs(diffX) > 50) {
          if (diffX > 0) {
            table.page("previous").draw("page");
          } else {
            table.page("next").draw("page");
          }
        }
      }

      function handleDrawCallback() {
        const isMobile = window.innerWidth <= 800;
        const tableElement = document.querySelector("#example_wrapper");

        if (isMobile) {
          const firstRow = tableElement.querySelector("tbody tr");
          if (firstRow) {
            firstRow.scrollIntoView({ behavior: "smooth", block: "start" });
          }
        } else {
          window.scrollTo({ top: 0, behavior: "smooth" });
        }
      }
    </script>
  </body>
</html>
