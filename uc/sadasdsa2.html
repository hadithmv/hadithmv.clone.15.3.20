<!doctype html>
<!-- <html dir="rtl"> -->
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>ނަވަވީގެ ސާޅީސް ޙަދީޘް</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link
      href="https://nightly.datatables.net/css/dataTables.dataTables.css"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://nightly.datatables.net/js/dataTables.js"></script>
    <!-- -->
    <link
      href="https://cdn.datatables.net/plug-ins/2.1.2/features/inputPaging/dist/dataTables.inputPaging.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://cdn.datatables.net/plug-ins/2.1.2/features/inputPaging/dist/dataTables.inputPaging.min.js"></script>
    <!-- -->
    <link
      href="https://cdn.datatables.net/buttons/3.1.0/css/buttons.dataTables.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.datatables.net/buttons/3.1.0/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.1.0/js/buttons.colVis.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.1.0/js/buttons.html5.min.js"></script>
    <!-- -->
    <link
      href="https://cdn.datatables.net/searchbuilder/1.7.1/css/searchBuilder.dataTables.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.datatables.net/searchbuilder/1.7.1/js/dataTables.searchBuilder.min.js"></script>
    <!-- searchpanes requires select too -->
    <link
      href="https://cdn.datatables.net/searchpanes/2.3.1/css/searchPanes.dataTables.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.datatables.net/searchpanes/2.3.1/js/dataTables.searchPanes.min.js"></script>
    <link
      href="https://cdn.datatables.net/select/2.0.3/css/select.dataTables.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.datatables.net/select/2.0.3/js/dataTables.select.min.js"></script>
    <!-- -->
    <link
      href="https://cdn.datatables.net/keytable/2.12.1/css/keyTable.dataTables.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.datatables.net/keytable/2.12.1/js/dataTables.keyTable.min.js"></script>
    <!-- -->
    <script src="https://cdn.datatables.net/plug-ins/2.1.3/api/row().show().min.js"></script>
    <!-- -->
    <!-- -->
    <!-- card styles
         https://datatables.net/forums/discussion/comment/228301/#Comment_228301 -->
    <style></style>
  </head>
  <body>
    <div class="container">
      <!-- cards class,  dir="rtl" -->
      <table id="example" class="display cards" width="100%"></table>
    </div>
    <script type="text/javascript">
      //
      var data = [
        [
          "Tiger Nixon",
          "System Architect",
          "Edinburgh",
          "5421",
          "2011",
          "$320,800",
        ],
        ["Garrett Winters", "Accountant", "Tokyo", "8422", "2011", "$170,750"],
        [
          "Ashton Cox",
          "Junior Technical Author",
          "San Francisco",
          "1562",
          "2009",
          "$86,000",
        ],
      ];

      //
      var table; // Variable to store the DataTable instance
      var isMobile = window.innerWidth <= 800; // Boolean to check if the current view is mobile

      // Remove the defaults
      DataTable.defaults.layout = {
        topStart: null,
        topEnd: null,
        bottomStart: null,
        bottomEnd: null,
      };
      //

      var desktopConfig = {
        layout: {
          top: ["buttons", "pageLength"],
          bottom: ["inputPaging", "info"],
        },
      };

      var mobileConfig = {
        layout: {
          top: [
            "inputPaging",
            "search",
            {
              buttons: [
                { extend: "copy" },
                {
                  extend: "collection",
                  background: false,
                  buttons: [
                    { extend: "colvis", background: false },
                    { extend: "searchBuilder" },
                    { extend: "searchPanes" },
                  ],
                },
                { extend: "pageLength", background: false },
              ],
            },
          ],
          bottom: ["inputPaging", "info"],
        },
      };

      // Function to initialize or reinitialize the DataTable
      function initializeDataTable() {
        var config = isMobile ? mobileConfig : desktopConfig;

        // Initialize DataTable with chosen config
        table = new DataTable("#example", {
          //

          ...config,

          data: data,

          columns: [
            { title: "Name", visible: false }, // removing visible: false makes it work
            { title: "Position" },
            { title: "Office" },
            { title: "Extn." },
            { title: "Start date" },
            { title: "Salary" },
          ],

          ordering: false, // commenting this out makes it work with visible: false
        });
      }

      // Debounce function to limit how often a function can fire
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // Resize event handler function to reinitialize DataTable on viewport size change events
      function handleResize() {
        var newIsMobile = window.innerWidth <= 800;
        // Check if we've crossed the mobile/desktop threshold
        if (newIsMobile !== isMobile) {
          isMobile = newIsMobile;
          table.destroy(); // Destroy the existing DataTable
          initializeDataTable(); // Reinitialize DataTable with the new configuration
        }
      }

      // Add event listener for window resize, using debounce to optimize performance
      window.addEventListener("resize", debounce(handleResize, 250));

      // Initial table setup
      initializeDataTable();
    </script>
  </body>
</html>
