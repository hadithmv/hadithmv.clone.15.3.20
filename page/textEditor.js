document.addEventListener("DOMContentLoaded",()=>{function e(){var e=this.value;t.value=e,d.value=e,r.style.fontSize=e+"px"}function l(){var e=r.value,t=e.trim()?e.trim().split(/\s+/).length:0,n=e?e.split("\n").length:0;o.textContent="Chars: "+e.length,i.textContent="Words: "+t,u.textContent="Lines: "+n,e=new Blob([e]).size,s.textContent=e<1024?"Bytes: "+e:e<1048576?"KB: "+(e/1024).toFixed(2):e<1073741824?"MB: "+(e/1048576).toFixed(2):"GB: "+(e/1073741824).toFixed(2)}function n(t){E[g-1].content=r.value,g=t,r.value=E.find(e=>e.id===t).content,document.querySelectorAll(".numbered-tab").forEach(e=>{e.classList.toggle("active",parseInt(e.dataset.tab)===t)}),l()}let a=document.querySelectorAll(".top-tab"),c=document.querySelectorAll(".tab-content"),r=document.getElementById("textArea"),t=document.getElementById("fontSizeSlider"),d=document.getElementById("fontSize"),o=document.getElementById("charCount"),i=document.getElementById("wordCount"),u=document.getElementById("lineCount"),s=document.getElementById("fileSize"),m=document.getElementById("addTab"),v=document.querySelector(".numbered-tabs"),g=1,E=[{id:1,content:""}],p=(a.forEach(t=>{t.addEventListener("click",()=>{a.forEach(e=>e.classList.remove("active")),t.classList.add("active"),c.forEach(e=>{e.classList.remove("active"),e.id===t.dataset.tab+"Tab"&&e.classList.add("active")})})}),t.addEventListener("input",e),d.addEventListener("change",e),d.addEventListener("click",function(){}),r.addEventListener("input",(t=>{let n;return function(...e){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),t(...e)},300)}})(l)),m.addEventListener("click",()=>{var e=E.length+1,t=(E.push({id:e,content:""}),document.createElement("button"));t.classList.add("numbered-tab"),t.dataset.tab=e,t.textContent=e,v.insertBefore(t,m),n(e)}),v.addEventListener("click",e=>{e.target.classList.contains("numbered-tab")&&n(parseInt(e.target.dataset.tab))}),document.getElementById("copyToClipboard").addEventListener("click",()=>{navigator.clipboard.writeText(r.value)}),document.getElementById("clearAll").addEventListener("click",()=>{r.value="",E=[{id:1,content:""}],v.innerHTML='<button class="numbered-tab active" data-tab="1">1</button><button id="addTab">+</button>',g=1,l()}),document.getElementById("arabicDigits").addEventListener("click",()=>{r.value=r.value.replace(/[0-9]/g,e=>"٠١٢٣٤٥٦٧٨٩"[e]),l()}),document.getElementById("regularDigits").addEventListener("click",()=>{r.value=r.value.replace(/[٠١٢٣٤٥٦٧٨٩]/g,e=>"٠١٢٣٤٥٦٧٨٩".indexOf(e)),l()}),document.getElementById("removeDiacritics").addEventListener("click",()=>{r.value=r.value.replace(/[\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/g,""),l()}),document.getElementById("saveFile").addEventListener("click",()=>{var e=new Blob([r.value],{type:"text/plain;charset=utf-8"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="text_area_content.txt",t.click()}),document.getElementById("loadFile").addEventListener("click",()=>{var e=document.createElement("input");e.type="file",e.accept="text/plain",e.onchange=e=>{e=e.target.files[0];var t=new FileReader;t.onload=e=>{r.value=e.target.result,l()},t.readAsText(e)},e.click()}),!0),L=(document.getElementById("toggleDirection").addEventListener("click",()=>{p=!p,r.style.direction=p?"rtl":"ltr",r.style.textAlign=p?"right":"left"}),[{name:"Title Case",func:e=>e.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())},{name:"Sentence case",func:e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},{name:"lower case",func:e=>e.toLowerCase()},{name:"UPPER CASE",func:e=>e.toUpperCase()}]),y=0,B=(document.getElementById("changeCase").addEventListener("click",()=>{r.value=L[y].func(r.value),y=(y+1)%L.length,document.getElementById("changeCase").textContent=L[y].name,l()}),document.getElementById("wordWrap").addEventListener("click",()=>{r.value=r.value.replace(/\s+/g," ").trim(),l()}),[{name:"Remove Extra Newlines",func:e=>e.replace(/\n{3,}/g,"\n\n")},{name:"Remove All Extra Newlines",func:e=>e.replace(/\n{2,}/g,"\n")},{name:"Reset Newlines",func:e=>e}]),I=0,b=(document.getElementById("removeNewlines").addEventListener("click",()=>{r.value=B[I].func(r.value),I=(I+1)%B.length,document.getElementById("removeNewlines").textContent=B[I].name,l()}),document.getElementById("removeExtraSpace").addEventListener("click",()=>{r.value=r.value.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/\n+/g,"\n").trim(),l()}),document.getElementById("keepOnlyNumbers").addEventListener("click",()=>{r.value=r.value.replace(/[^0-9\n]/g,""),l()}),document.getElementById("removeAllNumbers").addEventListener("click",()=>{r.value=r.value.replace(/[0-9]/g,""),l()}),document.getElementById("sortWordsByFrequency").addEventListener("click",()=>{let t={};r.value.split(/\s+/).forEach(e=>{t[e]=(t[e]||0)+1});var e=Object.entries(t).sort((e,t)=>t[1]-e[1]);r.value=e.map(([e,t])=>e+": "+t).join("\n"),l()}),document.getElementById("sortLinesByFrequency").addEventListener("click",()=>{let t={};r.value.split("\n").forEach(e=>{t[e]=(t[e]||0)+1});var e=Object.entries(t).sort((e,t)=>t[1]-e[1]);r.value=e.map(([e,t])=>e+` (${t})`).join("\n"),l()}),!1),h=(document.getElementById("toggleLineNumbers").addEventListener("click",()=>{var e=r.value.split("\n");b=b?(r.value=e.map(e=>e.replace(/^\d+\s/,"")).join("\n"),!(document.getElementById("toggleLineNumbers").textContent="Add Line Numbers")):(r.value=e.map((e,t)=>t+1+" "+e).join("\n"),document.getElementById("toggleLineNumbers").textContent="Remove Line Numbers",!0),l()}),"asc"),k=(document.getElementById("toggleSortLines").addEventListener("click",()=>{var e=r.value.split("\n");h="asc"===h?(r.value=e.sort().join("\n"),document.getElementById("toggleSortLines").textContent="Sort Lines (Desc)","desc"):"desc"===h?(r.value=e.sort().reverse().join("\n"),document.getElementById("toggleSortLines").textContent="Reset Sorting","reset"):(document.getElementById("toggleSortLines").textContent="Sort Lines (Asc)","asc"),l()}),document.getElementById("randomizeLines").addEventListener("click",()=>{var t=r.value.split("\n");for(let e=t.length-1;0<e;e--){var n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}r.value=t.join("\n"),l()}),"horizontal"),f=(document.getElementById("reverseText").addEventListener("click",()=>{k="horizontal"===k?(r.value=r.value.split("").reverse().join(""),document.getElementById("reverseText").textContent="Reverse Text ↕️","vertical"):(r.value=r.value.split("\n").reverse().join("\n"),document.getElementById("reverseText").textContent="Reverse Text ⏪","horizontal"),l()}),document.getElementById("generatePassword").addEventListener("click",()=>{var t=Math.floor(10*Math.random())+8;let n="";for(let e=0;e<t;e++)n+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+".charAt(Math.floor(74*Math.random()));r.value+=(r.value?"\n":"")+n,l()}),"none"),x=(document.getElementById("toggleListTags").addEventListener("click",()=>{var e=r.value.split("\n");f="none"===f?(r.value="<ol>\n"+e.map(e=>`  <li>${e}</li>`).join("\n")+"\n</ol>",document.getElementById("toggleListTags").textContent="HTML U List","ordered"):"ordered"===f?(r.value="<ul>\n"+e.map(e=>e.replace(/<li>(.*)<\/li>/,"  <li>$1</li>")).join("\n")+"\n</ul>",document.getElementById("toggleListTags").textContent="Remove Tags","unordered"):(r.value=e.map(e=>e.replace(/<li>(.*)<\/li>/,"$1")).join("\n").replace(/<\/?[ou]l>\n?/g,""),document.getElementById("toggleListTags").textContent="HTML O List","none"),l()}),document.getElementById("removePrecedingZeros").addEventListener("click",()=>{r.value=r.value.replace(/\b0+(\d+)/g,"$1"),l()}),document.getElementById("removeDhivehiDiacritics").addEventListener("click",()=>{r.value=r.value.replace(/[\u07A6-\u07B0]/g,""),l()}),document.getElementById("removePunctuation").addEventListener("click",()=>{r.value=r.value.replace(/[^\w\s]/g,""),l()}),0),C=(convertFootnotesBtn.addEventListener("click",()=>{switch(x%3){case 0:r.value=r.value.replace(/\((\d+)\)|\[(\d+)\]/g,(e,t,n)=>`⁽${(t||n).split("").map(e=>"⁰¹²³⁴⁵⁶⁷⁸⁹"[e]).join("")}⁾`);break;case 1:r.value=r.value.replace(/⁽([⁰¹²³⁴⁵⁶⁷⁸⁹]+)⁾/g,(e,t)=>`(${t.split("").map(e=>"⁰¹²³⁴⁵⁶⁷⁸⁹".indexOf(e)).join("")})`);break;case 2:r.value=r.value.replace(/\((\d+)\)/g,(e,t)=>`[${t}]`)}x++,convertFootnotesBtn.textContent=["(1)/[1] → ⁽¹⁾","⁽¹⁾ → (1)","(1) → [1]"][x%3],l()}),0),S=(document.getElementById("bracketNumbers").addEventListener("click",()=>{r.value=0==C%2?r.value.replace(/\((\d+)\)|\[(\d+)\]/g,"$1$2"):r.value.replace(/(\d+)(?!\))/g,"($1)"),C++,document.getElementById("bracketNumbers").textContent=0==C%2?"(1) → 1":"1 → (1)",l()}),document.getElementById("removeNumbersInBrackets").addEventListener("click",()=>{r.value=r.value.replace(/\(\d+\)|\[\d+\]|⁽[⁰¹²³⁴⁵⁶⁷⁸⁹]+⁾/g,""),l()}),document.getElementById("removeDuplicateLines").addEventListener("click",()=>{var e=r.value.split("\n"),e=[...new Set(e)];r.value=e.join("\n"),l()}),document.getElementById("splitIntoWords").addEventListener("click",()=>{var e=r.value.match(/\S+/g)||[];r.value=e.join("\n"),l()}),0),T=(document.getElementById("convertSalawat").addEventListener("click",()=>{S++,r.value=1==S%2?r.value.replace(/صَلَّى اللهُ عَلَيْهِ وَسَلَّمَ|صلى الله عليه وسلم/g,"ﷺ"):r.value.replace(/ﷺ/g,"صَلَّى اللهُ عَلَيْهِ وَسَلَّمَ"),l()}),["0123456789".split(""),"𝟢 𝟣 𝟤 𝟥 𝟦 𝟧 𝟨 𝟩 𝟪 𝟫".split(" "),"０１２３４５６７８９".split(""),"𝟬 𝟭 𝟮 𝟯 𝟰 𝟱 𝟲 𝟳 𝟴 𝟵".split(" "),"⓪①②③④⑤⑥⑦⑧⑨".split(""),"⓿❶❷❸❹❺❻❼❽❾".split("")]),w=0,A=(document.getElementById("convertNumbers").addEventListener("click",()=>{var t=T[w],n=T[(w+1)%T.length];let a=r.value;for(let e=0;e<10;e++)a=a.replace(new RegExp(t[e],"g"),n[e]);r.value=a,w=(w+1)%T.length,l()}),document.getElementById("shaddaB4Haraka").addEventListener("click",()=>{r.value=r.value.replace(RegExp("([ًٌٍَُِّْ])(ّ)","g"),(e,t,n)=>"ْ"===t?e:n+t)}),document.getElementById("removeQuranicMarks").addEventListener("click",()=>{r.value=r.value.replace(/[ۖۗۘۙۚۛۜ۝۞ۣ۟۠ۡۢۤۥۦۧۨ۩۪ۭ۫۬﴾﴿]/g,"").replace(/\s+/g," ").trim(),l()}),!0),j=(document.getElementById("replaceQuranicBrackets").addEventListener("click",()=>{let t=A?{"﴾":"}","﴿":"{","۝":"*"}:{"}":"﴾","{":"﴿","*":"۝"};r.value=r.value.replace(/[﴾﴿۝{}*]/g,e=>t[e]||e),A=!A,l()}),!0);document.getElementById("replaceRtlPunc").addEventListener("click",()=>{let t=j?{"،":",","؛":";","؟":"?"}:{",":"،",";":"؛","?":"؟"};r.value=r.value.replace(/[،؛؟,;?]/g,e=>t[e]||e),j=!j,l()}),document.getElementById("fullscreen").addEventListener("click",()=>{document.fullscreenElement?(document.exitFullscreen(),r.style.height="300px"):(document.documentElement.requestFullscreen(),r.style.height="100vh")}),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||(r.style.height="300px")}),document.getElementById("help").addEventListener("click",()=>{document.querySelectorAll(".function-button").forEach(e=>{e.title=e.id})}),r.addEventListener("input",e=>{var t=e.target.selectionStart,n=e.target.value.substring(0,t);"ss-"===n.split(/\s/).pop()&&(n=n.replace(/ss-$/,"ﷺ")+e.target.value.substring(t),e.target.value=n,e.target.setSelectionRange(t,t))}),document.querySelectorAll(".copy-button").forEach(e=>{e.addEventListener("click",()=>{navigator.clipboard.writeText(e.dataset.text)})});var N=JSON.parse(localStorage.getItem("editorTabs"));N&&((E=N).forEach(e=>{var t;1<e.id&&((t=document.createElement("button")).classList.add("numbered-tab"),t.dataset.tab=e.id,t.textContent=e.id,v.insertBefore(t,m))}),n(parseInt(localStorage.getItem("currentTab"))||1)),setInterval(()=>{E[g-1].content=r.value,localStorage.setItem("editorTabs",JSON.stringify(E)),localStorage.setItem("currentTab",g)},5e3),l()});