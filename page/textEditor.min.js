document.addEventListener("DOMContentLoaded",(()=>{function e(){const e=this.value;r.value=e,i.value=e,d.style.fontSize=`${e}px`}function t(){var e=d.value;const t=e.trim()?e.trim().split(/\s+/).length:0,n=e?e.split("\n").length:0;s.textContent=`Char: ${e.length}`,u.textContent=`Wrd: ${t}`,m.textContent=`Ln: ${n}`,e=new Blob([e]).size,v.textContent=1024>e?`B: ${e}`:1048576>e?`KB: ${(e/1024).toFixed(2)}`:1073741824>e?`MB: ${(e/1048576).toFixed(2)}`:`GB: ${(e/1073741824).toFixed(2)}`}function n(e){y[E-1].content=d.value,E=e,d.value=y.find((t=>t.id===e)).content,document.querySelectorAll(".numbered-tab").forEach((t=>{t.classList.toggle("active",parseInt(t.dataset.tab)===e)})),t()}function l(){d.style.direction="ltr",d.style.textAlign="left"}function a(){window.scrollTo({top:0,behavior:"smooth"})}const c=document.querySelectorAll(".top-tab"),o=document.querySelectorAll(".tab-content"),d=document.getElementById("textArea"),r=document.getElementById("fontSizeSlider"),i=document.getElementById("fontSize"),s=document.getElementById("charCount"),u=document.getElementById("wordCount"),m=document.getElementById("lineCount"),v=document.getElementById("fileSize"),g=document.getElementById("addTab"),p=document.querySelector(".numbered-tabs");let E=1,y=[{id:1,content:""}];c.forEach((e=>{e.addEventListener("click",(()=>{c.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),o.forEach((t=>{t.classList.remove("active"),t.id===`${e.dataset.tab}Tab`&&t.classList.add("active")}))}))})),r.addEventListener("input",e),i.addEventListener("change",e),i.addEventListener("click",(function(){})),d.addEventListener("input",function(e){let t;return function(...n){clearTimeout(t),t=setTimeout((()=>{clearTimeout(t),e(...n)}),300)}}(t)),g.addEventListener("click",(()=>{const e=y.length+1;y.push({id:e,content:""});const t=document.createElement("button");t.classList.add("numbered-tab"),t.dataset.tab=e,t.textContent=e,p.insertBefore(t,g),n(e)})),p.addEventListener("click",(e=>{e.target.classList.contains("numbered-tab")&&n(parseInt(e.target.dataset.tab))})),document.getElementById("copyToClipboard").addEventListener("click",(()=>{navigator.clipboard.writeText(d.value)})),document.getElementById("clearAll").addEventListener("click",(()=>{d.value="",y=[{id:1,content:""}],p.innerHTML='<button class="numbered-tab active" data-tab="1">1</button><button id="addTab">+</button>',E=1,t()})),document.getElementById("arabicDigits").addEventListener("click",(()=>{d.value=d.value.replace(/[0-9]/g,(e=>"٠١٢٣٤٥٦٧٨٩"[e])),t()})),document.getElementById("regularDigits").addEventListener("click",(()=>{d.value=d.value.replace(/[٠١٢٣٤٥٦٧٨٩]/g,(e=>"٠١٢٣٤٥٦٧٨٩".indexOf(e))),t()})),document.getElementById("removeDiacritics").addEventListener("click",(()=>{d.value=d.value.replace(/[\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/g,""),t()})),document.getElementById("saveFile").addEventListener("click",(()=>{const e=new Blob([d.value],{type:"text/plain;charset=utf-8"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="saved_text.txt",t.click()})),document.getElementById("loadFile").addEventListener("click",(()=>{const e=document.createElement("input");e.type="file",e.accept="text/plain",e.onchange=e=>{e=e.target.files[0];const n=new FileReader;n.onload=e=>{d.value=e.target.result,t()},n.readAsText(e)},e.click()}));let h=!0;document.getElementById("toggleDirection").addEventListener("click",(()=>{h=!h,d.style.direction=h?"rtl":"ltr",d.style.textAlign=h?"right":"left"}));const f=[{name:"Title Case",func:e=>e.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()))},{name:"Sentence case",func:e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},{name:"lower case",func:e=>e.toLowerCase()},{name:"UPPER CASE",func:e=>e.toUpperCase()}];let I=0;document.getElementById("changeCase").addEventListener("click",(()=>{d.value=f[I].func(d.value),I=(I+1)%f.length,document.getElementById("changeCase").textContent=f[I].name,t()})),document.getElementById("wordWrap").addEventListener("click",(()=>{d.value=d.value.replace(/\s+/g," ").trim(),t()}));const L=[{func:e=>e.trim().replace(/\n{3,}/g,"\n\n")},{func:e=>e.trim().replace(/\n{2,}/g,"\n")},{func:e=>e.trim().split("\n").filter((e=>""!==e.trim())).join("\n")},{func:e=>e}];let B=0;document.getElementById("removeNewlines").addEventListener("click",(()=>{d.value=L[B].func(d.value),B=(B+1)%L.length,t()})),document.getElementById("removeExtraSpace").addEventListener("click",(()=>{d.value=d.value.replace(/^ +| +$/gm,"").replace(/ +/g," ").trim(),t()}));let b=!1;document.getElementById("convertQuotes").addEventListener("click",(()=>{d.value=b?d.value.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"'):d.value.replace(/(\W|^)"(\S)/g,"$1”$2").replace(/(\u201D[^"]*)"([^"]*$|[^\u201D"]*\u201D)/g,"$1“$2").replace(/([^0-9])"/g,"$1“").replace(/(\W|^)'(\S)/g,"$1’$2").replace(/([a-z])'([a-z])/gi,"$1‘$2").replace(/((\u2019[^']*)|[a-z])'([^0-9]|$)/gi,"$1‘$3").replace(/(\u2019)([0-9]{2}[^\u2018]*)(\u2019([^0-9]|$)|$|\u2018[a-z])/gi,"‘$2$3").replace(/(\B|^)\u2019(?=([^\u2018]*\u2018\b)*([^\u2018\u2019]*\W[\u2018\u2019]\b|[^\u2018\u2019]*$))/gi,"$1‘").replace(/'''/g,"‴").replace(/''/g,"″").replace(/'/g,"′"),b=!b,t()})),document.getElementById("keepOnlyNumbers").addEventListener("click",(()=>{d.value=d.value.replace(/[^0-9\n]/g,""),t()}));let k=0;document.getElementById("cycleBrackets").addEventListener("click",(()=>{const e=[{from:/[()[\]]/g,to:e=>"("===e||"["===e?"⌜":"⌝",next:"⌜⌝ → ⌝⌜"},{from:/[⌜⌝]/g,to:e=>"⌜"===e?"⌝":"⌜",next:"⌝⌜ → ()"},{from:/[⌝⌜]/g,to:e=>"⌝"===e?"(":")",next:"() [] → ⌜⌝"}];d.value=d.value.replace(e[k].from,e[k].to),document.getElementById("cycleBrackets").textContent=e[k].next,k=(k+1)%3,t()}));let x=!1;document.getElementById("dotsToEllipsis").addEventListener("click",(()=>{d.value=x?d.value.replace(/…/g,"..."):d.value.replace(/\.{3}/g,"…"),x=!x,t()}));let $=0;document.getElementById("hyphenToEnThenEmDash").addEventListener("click",(()=>{const e=[{from:/-/g,to:"–"},{from:/–/g,to:"—"},{from:/—/g,to:"-"}];d.value=d.value.replace(e[$].from,e[$].to),$=($+1)%3,t()}));let C=!0;document.getElementById("reverseCurlyQuotes").addEventListener("click",(()=>{const e=document.getElementById("textArea"),n=C?{"‘":"’","’":"‘","“":"”","”":"“"}:{"’":"‘","‘":"’","”":"“","“":"”"};e.value=e.value.replace(/[’‘”“]/g,(e=>n[e]||e)),C=!C,t()})),document.getElementById("removeAllNumbers").addEventListener("click",(()=>{d.value=d.value.replace(/[0-9]/g,""),t()})),document.getElementById("keepOnlyAr").addEventListener("click",(()=>{a(),d.value=d.value.replace(/[^\u0600-\u06ff\u0750-\u077f\ufb50-\ufbc1\ufbd3-\ufd3f\ufd50-\ufd8f\ufd92-\ufdc7\ufe70-\ufefc\uFDF0-\uFDFD\s]/g,""),t()})),document.getElementById("text2HtmlP").addEventListener("click",(()=>{l(),a();let e=d.value.split(/\n{1,}/);e=e.filter((e=>""!==e.trim())),d.value=e.map((e=>`<p>${e.trim()}</p>`)).join("\n"),t()})),document.getElementById("whichUnicodeCharacter").addEventListener("click",(()=>{a(),l();const e=d.value;let n="";for(let t=0;t<e.length;t++){const l=e.codePointAt(t),a=`https://codepoints.net/U+${l.toString(16).toUpperCase().padStart(4,"0")}`;n+=`U+${l.toString(16).toUpperCase().padStart(4,"0")} : ${e[t]} : ${a}\n`,65535<l&&t++}d.value=n,t()})),document.getElementById("rmvHtmlTags").addEventListener("click",(()=>{a(),d.value=d.value.replace(/<[^>]*>/g,""),t()}));let S=!1;document.getElementById("decodeEncodeUnicode").addEventListener("click",(()=>{if(l(),S){const e=d.value;let t="";for(let n=0;n<e.length;n++){t+="\\u"+e.charCodeAt(n).toString(16).padStart(4,"0")}d.value=t,document.getElementById("decodeEncodeUnicode").textContent="Decode \\unicode"}else d.value=d.value.replace(/\\u([0-9a-fA-F]{4})/g,((e,t)=>String.fromCharCode(parseInt(t,16)))),document.getElementById("decodeEncodeUnicode").textContent="Encode unicode";S=!S,t()}));let T=!1;document.getElementById("decodeEncodeURL").addEventListener("click",(()=>{l(),T?(d.value=encodeURI(d.value),document.getElementById("decodeEncodeURL").textContent="Decode URL"):(d.value=decodeURI(d.value),document.getElementById("decodeEncodeURL").textContent="Encode URL"),T=!T,t()})),document.getElementById("sortWordsByFrequency").addEventListener("click",(()=>{a();const e={};(d.value.toLowerCase().match(/\b[\w']+\b/g)||[]).forEach((t=>{e[t]=(e[t]||0)+1}));const n=Object.entries(e).sort(((e,t)=>t[1]-e[1])).map((([e,t])=>`${t}: ${e}`));d.value=n.join("\n"),t()})),document.getElementById("sortLinesByFrequency").addEventListener("click",(()=>{a();const e={};d.value.split("\n").filter((e=>""!==e.trim())).forEach((t=>{e[t]=(e[t]||0)+1}));const n=Object.entries(e).sort(((e,t)=>t[1]-e[1])).map((([e,t])=>`${t}: ${e}`));d.value=n.join("\n"),t()}));let w=!1;document.getElementById("toggleLineNumbers").addEventListener("click",(()=>{const e=d.value.split("\n");w?(d.value=e.map((e=>e.replace(/^\d+\.\s/,""))).join("\n"),document.getElementById("toggleLineNumbers").textContent="Add Line Numbers",w=!1):(d.value=e.map(((e,t)=>`${t+1}. ${e}`)).join("\n"),document.getElementById("toggleLineNumbers").textContent="Rmv Line Numbers",w=!0),t()}));let F="asc";document.getElementById("toggleSortLines").addEventListener("click",(()=>{const e=d.value.split("\n");"asc"===F?(d.value=e.sort().join("\n"),document.getElementById("toggleSortLines").textContent="Sort Lines ⬇️",F="desc"):"desc"===F?(d.value=e.sort().reverse().join("\n"),document.getElementById("toggleSortLines").textContent="Reset Sorting",F="reset"):(document.getElementById("toggleSortLines").textContent="Sort Lines ⬆️",F="asc"),t()})),document.getElementById("randomizeLines").addEventListener("click",(()=>{const e=d.value.split("\n");for(let t=e.length-1;0<t;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}d.value=e.join("\n"),t()}));let D="horizontal";document.getElementById("reverseText").addEventListener("click",(()=>{"horizontal"===D?(d.value=d.value.split("").reverse().join(""),document.getElementById("reverseText").textContent="Rvrs VertiLines ↕️",D="vertical"):(d.value=d.value.split("\n").reverse().join("\n"),document.getElementById("reverseText").textContent="Rvrs HoriTxt ⏪",D="horizontal"),t()})),document.getElementById("genRandPass").addEventListener("click",(()=>{const e=Math.floor(9*Math.random())+8;let n="";for(let t=0;t<e;t++)n+=String.fromCharCode(Math.floor(94*Math.random()+33));var l;d.value=(l=n,[{regex:/[a-z]/,range:[97,122]},{regex:/[A-Z]/,range:[65,90]},{regex:/[0-9]/,range:[48,57]},{regex:/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>/?]/,range:[33,47]}].forEach((e=>{if(!e.regex.test(l)){const t=Math.floor(Math.random()*l.length);e=String.fromCharCode(Math.floor(Math.random()*(e.range[1]-e.range[0]+1))+e.range[0]),l=l.substring(0,t)+e+l.substring(t+1)}})),l),t()}));let j="none";document.getElementById("toggleListTags").addEventListener("click",(()=>{const e=d.value.split("\n");"none"===j?(d.value="<ol>\n"+e.map((e=>`  <li>${e}</li>`)).join("\n")+"\n</ol>",document.getElementById("toggleListTags").textContent="HTML U List",j="ordered"):"ordered"===j?(d.value="<ul>\n"+e.map((e=>e.replace(/<li>(.*)<\/li>/,"  <li>$1</li>"))).join("\n")+"\n</ul>",document.getElementById("toggleListTags").textContent="Remove Tags",j="unordered"):(d.value=e.map((e=>e.replace(/<li>(.*)<\/li>/,"$1"))).join("\n").replace(/<\/?[ou]l>\n?/g,""),document.getElementById("toggleListTags").textContent="HTML O List",j="none"),t()})),document.getElementById("removePrecedingZeros").addEventListener("click",(()=>{d.value=d.value.replace(/\b0+(\d+)/g,"$1"),t()}));const A={"ޘ":"ސ","ޙ":"ހ","ޛ":"ޒ","ޜ":"ޒ","ޞ":"ސ","ޠ":"ތ","ޡ":"ޒ","ޢ":"އ","ޤ":"ގ","ޥ":"ވ"};document.getElementById("keepOnlyDv").addEventListener("click",(()=>{a(),d.value=d.value.replace(/[^\u0780-\u07BF\s]/g,""),t()}));const M=[["އަ","a"],["އާ","aa"],["އި","i"],["އީ","ee"],["އު","u"],["އޫ","oo"],["އެ","e"],["އޭ","ey"],["އޮ","o"],["އޯ","oa"],["ުއް","uh"],["ިއް","ih"],["ެއް","eh"],["ަށް","ah"],["ައް","ah"],["ށް","h"],["ތް","i"],["ާއް","aah"],["އް","h"],["ަ","a"],["ާ","aa"],["ި","i"],["ީ","ee"],["ު","u"],["ޫ","oo"],["ެ","e"],["ޭ","ey"],["ޮ","o"],["ޯ","oa"],["ް",""],["ހ","h"],["ށ","sh"],["ނ","n"],["ރ","r"],["ބ","b"],["ޅ","lh"],["ކ","k"],["އ","a"],["ވ","v"],["މ","m"],["ފ","f"],["ދ","dh"],["ތ","th"],["ލ","l"],["ގ","g"],["ޏ","y"],["ސ","s"],["ޑ","d"],["ޒ","z"],["ޓ","t"],["ޔ","y"],["ޕ","p"],["ޖ","j"],["ޗ","ch"],["ޙ","h"],["ޚ","kh"],["ޛ‎","z"],["ޜ‎","z"],["ޝ‎","sh"],["ޝ","sh"],["ޤ","q"],["ޢ","a"],["ޞ","s"],["ޟ","dh"],["ޡ","z"],["ޠ","t"],["ާާޣ","gh"],["ޘ","th"],["ޛ","dh"],["ާާޜ","z"]];document.getElementById("transliterateDvToEn").addEventListener("click",(()=>{a(),d.value=function(e){e=e.replace(/[\u200B-\u200D\uFEFF]/g,"");for(const[t,n]of M)e=e.replace(new RegExp(t,"g"),n);return e.replace(/(^\s*\w|[.!?]\s*\w)/g,(e=>e.toUpperCase()))}(d.value),l(),t()}));const N=[["ـ",""],["آ","އާ"],["ب","ބ"],["ت","ތ"],["ث","ޘ"],["ج","ޖ"],["ح","ޙ"],["خ","ޚ"],["د","ދ"],["ذ","ޛ"],["ر","ރ"],["ز","ޒ"],["س","ސ"],["ش","ޝ"],["ص","ޞ"],["ض","ޟ"],["ط","ޠ"],["ظ","ޡ"],["ع","ޢ"],["غ","ޣ"],["ف","ފ"],["ق","ޤ"],["ك","ކ"],["ل","ލ"],["م","މ"],["ن","ނ"],["ه","ހ"],["و","ވ"],["ي","ޔ"],["ة","ތ"],["ء","އ"],["أ","އ"],["ؤ","އ"],["إ","އ"],["ئ","އ"],["ى","އ"],["َ","ަ"],["ِ","ި"],["ُ","ު"],["ْ","ް"],["ً","ަން"],["ٍ","ިން"],["ٌ","ުން"],["ަا","ާ"],["اލ","ލ"],["ލއްލަހ","ﷲ"],["ލލހ","ﷲ"],["ލއް","އް"],["ާ އްލަ","ަ އްލަ"],["ا",""],["ުވ","ޫ"],["އ އް"," އް"],["ޫ ލ","ު ލ"],["އްލަލ","އްލަ"],["«",'"'],["»",'"']];document.getElementById("transliterateArToDv").addEventListener("click",(()=>{a(),d.value=function(e){e=(e=(e=e.replace(/(.)ّ/g,((e,t)=>`އް${N.find((([e])=>e===t))?.[1]||t}`))).replace(/ة([َِ ُ ً ٍ ٌ])/g,"ތ$1")).replace(/ة(?![َِ ُ ً ٍ ٌ])/g,"ހ");for(const[t,n]of N)e=e.replace(new RegExp(t,"g"),n);return e}(d.value),t()}));const R=new class{constructor(){this.ehbari="ސުމެއް އެއް ދެ ތިން ހަތަރު ފަސް ހަ ހަތް އަށް ނުވަ ދިހަ އެގާރަ ބާރަ ތޭރަ ސާދަ ފަނަރަ ސޯޅަ ސަތާރަ އަށާރަ ނަވާރަ ވިހި އެކާވީސް ބާވީސް ތޭވީސް ސައުވީސް ފަންސަވީސް ސައްބީސް ހަތާވީސް އަށާވީސް ނަވާވީސް".split(" "),this.dhihabari="ސުން ދިހަ ވިހި ތިރީސް ސާޅީސް ފަންސާސް ފަސްދޮޅަސް ހައްދިހަ އައްޑިހަ ނުވަދިހަ".split(" "),this.sunbari=["","ހާސް","މިލިޔަން","ބިލިޔަން","ޓްރިލިޔަން"]}convert(e){return e?1e3>(e=parseInt(e))?this.thousandSub(e):this.thousandUp(e):null}thousandSub(e){var t="ސަތޭކަ ";if(0>=e||29>=e)return this.ehbari[e];if(99>=e)return t=Math.floor(e/10),0===(e%=10)?this.dhihabari[t]:`${this.dhihabari[t]} ${this.ehbari[e]}`;if(999>=e){const n=e%100;return 2===(e=Math.floor(e/100))&&(this.ehbari[2]="ދުވި",t="ސައްތަ "),0===n?`${this.ehbari[e]} ${t}`:`${this.ehbari[e]} ${t}${this.thousandSub(n)}`}return""}thousandHalf(e){const t=[];for(;0!==e;)t.push(e%1e3),e=Math.floor(e/1e3);return t}thousandUp(e){var t=this.thousandHalf(e);e=t.length-1;const n=[];for(var l of t.reverse()){t=`${this.thousandSub(l)} `;let a=`${this.sunbari[e]} `;if(" "===t)break;"ސުން "!==t&&"ސުމެއް "!==t||(a=t=""),n.push(t+a),--e}return(l=n.join("")).endsWith(",")&&(l=l.slice(0,-1)),l.trim()}};document.getElementById("Nos2DvTxt").addEventListener("click",(()=>{a();const e=d.value.split("\n").map((e=>{const t=e.match(/\d+/g);return t?t.map((e=>R.convert(e).replace(/\s+/g," ").trim())).join("، "):e.trim()}));d.value=e.filter((e=>0<e.length)).join("\n"),t()})),document.getElementById("removeThikijehiThaana").addEventListener("click",(()=>{var e;d.value=(e=d.value,a(),e.replace(/[ޘޙޛޜޞޠޡޢޤޥ]/g,(e=>A[e]||e))),t()})),document.getElementById("removeDhivehiFili").addEventListener("click",(()=>{a(),d.value=d.value.replace(/[\u07A6-\u07B0]/g,""),t()}));const U=document.getElementById("filiIssuesResults");document.getElementById("findFiliIssues").addEventListener("click",(()=>{const e=/[\u07a6-\u07b0]/,t=/[\u064b-\u0650\u0652-\u0656]/,n=/[\u0780-\u07a5]/,l=/[\u064e\u064f\u0650]/,a=d.value.split(/\s+/),c=[];for(let o=0;o<a.length;o++){const d=a[o];let r=[];for(let a=0;a<d.length;a++){const c=d[a],o=d[a+1]||"",i=d[a-1]||"";e.test(c)&&e.test(o)||t.test(c)&&t.test(o)||"ّ"===c&&"ّ"===o?(0<r.length&&"standalone"===r[r.length-1].type&&r[r.length-1].index===a-1&&r.pop(),r.push({type:"multiple",index:a}),a++):(n.test(c)&&"ނ"!==c&&!e.test(o)&&r.push({type:"noDvFili",index:a}),!e.test(c)&&!t.test(c)&&"ّ"!==c||n.test(i)||/[\u0600-\u06FF]/.test(i)||"ّ"===c&&l.test(o)||r.push({type:"standalone",index:a}))}0<r.length&&c.push({word:d,index:o,issues:r})}!function(e){if(0===e.length)U.innerHTML="No issues found.";else{var t=e.reduce(((e,t)=>e+t.issues.length),0),n=d.value.split(/\s+/),l=`Found ${t} issue${1<t?"s":""}<br>`;e.forEach(((e,t)=>{const a=n[e.index-1]||"",c=n[e.index+1]||"";let o=e.issues.map((t=>{let n,l;switch(n="multiple"===t.type?`${e.word[t.index-1]||""}${e.word[t.index]} ${e.word[t.index+1]}`:`${e.word[t.index-1]||""} ${e.word[t.index]}`,t.type){case"multiple":l=`Multiple Fili :&nbsp; ${n}`;break;case"noDvFili":l=`Thaana w/o Fili :&nbsp; ${n}`;break;case"standalone":l=`Standalone Fili :&nbsp; ${n}`}return l})).join(", ");l+=`${t+1}. ${a} <span style="color: blue;">${e.word}</span> ${c} : <span style="color: red;">${o}</span><br>`})),U.innerHTML=l}U.style.display="block"}(c)})),document.getElementById("removePunctuation").addEventListener("click",(()=>{a(),d.value=d.value.replace(/[^\w\s]/g,""),t()}));let z=0;convertFootnotesBtn.addEventListener("click",(()=>{switch(z%3){case 0:d.value=d.value.replace(/\((\d+)\)|\[(\d+)\]/g,((e,t,n)=>`⁽${(t||n).split("").map((e=>"⁰¹²³⁴⁵⁶⁷⁸⁹"[e])).join("")}⁾`));break;case 1:d.value=d.value.replace(/⁽([⁰¹²³⁴⁵⁶⁷⁸⁹]+)⁾/g,((e,t)=>`(${t.split("").map((e=>"⁰¹²³⁴⁵⁶⁷⁸⁹".indexOf(e))).join("")})`));break;case 2:d.value=d.value.replace(/\((\d+)\)/g,((e,t)=>`[${t}]`))}z++,convertFootnotesBtn.textContent=["(1)/[1] → ⁽¹⁾","⁽¹⁾ → (1)","(1) → [1]"][z%3],t()}));let O=0;document.getElementById("bracketNumbers").addEventListener("click",(()=>{d.value=0==O%2?d.value.replace(/\((\d+)\)|\[(\d+)\]/g,"$1$2"):d.value.replace(/(\d+)(?!\))/g,"($1)"),O++,t()})),document.getElementById("removeNumbersInBrackets").addEventListener("click",(()=>{a(),d.value=d.value.replace(/\(\d+\)|\[\d+\]|⁽[⁰¹²³⁴⁵⁶⁷⁸⁹]+⁾/g,""),t()})),document.getElementById("removeDuplicateLines").addEventListener("click",(()=>{a();var e=d.value.split("\n");e=[...new Set(e)],d.value=e.join("\n"),t()})),document.getElementById("splitIntoWords").addEventListener("click",(()=>{a();const e=d.value.match(/\S+/g)||[];d.value=e.join("\n"),t()}));let q=0;document.getElementById("convertSalawat").addEventListener("click",(()=>{q++,d.value=1==q%2?d.value.replace(/صَلَّى اللهُ عَلَيْهِ وَسَلَّمَ|صلى الله عليه وسلم/g,"ﷺ"):d.value.replace(/ﷺ/g,"صَلَّى اللهُ عَلَيْهِ وَسَلَّمَ"),t()}));const H=["0123456789".split(""),"𝟢 𝟣 𝟤 𝟥 𝟦 𝟧 𝟨 𝟩 𝟪 𝟫".split(" "),"０１２３４５６７８９".split(""),"𝟬 𝟭 𝟮 𝟯 𝟰 𝟱 𝟲 𝟳 𝟴 𝟵".split(" "),"⓪①②③④⑤⑥⑦⑧⑨".split(""),"⓿❶❷❸❹❺❻❼❽❾".split("")];let P=0;document.getElementById("convertNumbers").addEventListener("click",(()=>{const e=H[P],n=H[(P+1)%H.length];let l=d.value;for(let t=0;10>t;t++)l=l.replace(new RegExp(e[t],"g"),n[t]);d.value=l,P=(P+1)%H.length,t()}));let Q=!1;const W={a:"4",e:"3",i:"!",o:"0",t:"7",l:"1",s:"5"},_=Object.fromEntries(Object.entries(W).map((([e,t])=>[t,e])));document.getElementById("toggleLeetSpeak").addEventListener("click",(()=>{d.value=Q?d.value.replace(/[43!0715]/g,(e=>_[e])):d.value.toLowerCase().replace(/[aeiotls]/g,(e=>W[e])),Q=!Q,t(),l()})),document.getElementById("removeKashidas").addEventListener("click",(()=>{a(),d.value=d.value.replace(/ـ/g,""),t()})),document.getElementById("shaddaB4Haraka").addEventListener("click",(()=>{a(),d.value=d.value.replace(RegExp("([ًٌٍَُِّْ])(ّ)","g"),((e,t,n)=>"ْ"===t?e:n+t))})),document.getElementById("removeQuranicMarks").addEventListener("click",(()=>{a(),d.value=d.value.replace(/[ۖۗۘۙۚۛۜ۝۞ۣ۟۠ۡۢۤۥۦۧۨ۩۪ۭ۫۬﴾﴿]/g,"").replace(/\s+/g," ").trim(),t()}));let J=0;document.getElementById("replaceQuoteToDoubleAngleBrackets").addEventListener("click",(()=>{switch(a(),J){case 0:d.value=d.value.replace(/"([^"]*)"/g,"«$1»").replace(/\(\(([^)]*)\)\)/g,"«$1»"),document.getElementById("replaceQuoteToDoubleAngleBrackets").textContent="« » → (( ))",J=1;break;case 1:d.value=d.value.replace(/«([^»]*)»/g,"(($1))"),document.getElementById("replaceQuoteToDoubleAngleBrackets").textContent='(( )) → " "',J=2;break;case 2:d.value=d.value.replace(/\(\(([^)]*)\)\)/g,'"$1"'),document.getElementById("replaceQuoteToDoubleAngleBrackets").textContent='" " / (( )) → « »',J=0}t()})),document.getElementById("replaceDoubleBracketsToSingle").addEventListener("click",(()=>{d.value=d.value.replace(/\(\(([^)]*)\)\)/g,"($1)"),t()}));let K=!0;document.getElementById("replaceQuranicBrackets").addEventListener("click",(()=>{const e=K?{"{":"﴿","}":"﴾","*":"۝"}:{"﴿":"{","﴾":"}","۝":"*"};d.value=d.value.replace(/[﴾﴿۝{}*]/g,(t=>e[t]||t)),K=!K,t()}));let Z=!0;document.getElementById("replaceRtlPunc").addEventListener("click",(()=>{const e=Z?{"،":",","؛":";","؟":"?"}:{",":"،",";":"؛","?":"؟"};d.value=d.value.replace(/[،؛؟,;?]/g,(t=>e[t]||t)),Z=!Z,t()})),document.getElementById("replaceColon2Fullstop").addEventListener("click",(()=>{a(),d.value=d.value.replace(/:/g,"."),t()}));const G=document.getElementById("seqMinInput"),V=document.getElementById("seqMaxInput");let Y=1,X=10;document.getElementById("generateNumSequence").addEventListener("click",(()=>{"none"===G.style.display?(G.style.display="inline-block",V.style.display="inline-block",G.value=Y):(Y=parseInt(G.value),X=parseInt(V.value),isNaN(Y)&&(Y=0),isNaN(X)&&(X=10),Y>X&&([Y,X]=[X,Y],G.value=Y,V.value=X));var e="";for(let t=Y;t<=X;t++)e+=t+"\n";e=e.trim(),d.value=e})),G.addEventListener("change",(()=>{Y=parseInt(G.value),isNaN(Y)&&(Y=0)})),V.addEventListener("change",(()=>{X=parseInt(V.value),isNaN(X)&&(X=10)}));const ee=document.getElementById("RandNoMinInput"),te=document.getElementById("RandNoMaxInput");let ne=1,le=10;document.getElementById("randomNum").addEventListener("click",(()=>{"none"===ee.style.display?(ee.style.display="inline-block",te.style.display="inline-block",ee.value=ne):(ne=parseInt(ee.value)||1,le=parseInt(te.value)||10,ne>le&&([ne,le]=[le,ne],ee.value=ne,te.value=le)),d.value=(Math.floor(Math.random()*(le-ne+1))+ne).toString(),t()})),ee.addEventListener("change",(()=>{ne=parseInt(ee.value)||1})),te.addEventListener("change",(()=>{le=parseInt(te.value)||10}));const ae=document.getElementById("repeatInput");document.getElementById("repeatLines").addEventListener("click",(()=>{if("none"===ae.style.display)ae.style.display="inline-block";else{const e=parseInt(ae.value)||1;d.value=Array(e).fill(d.value).join("\n"),t()}}));const ce=document.getElementById("prefixInput"),oe=document.getElementById("suffixInput");document.getElementById("prefixSuffixToLine").addEventListener("click",(()=>{if("none"===ce.style.display)ce.style.display="inline-block",oe.style.display="inline-block";else{const e=ce.value,n=oe.value,l=d.value.split("\n").map((t=>e+t+n));d.value=l.join("\n"),t()}}));const de=document.getElementById("removeFromStart"),re=document.getElementById("removeFromEnd");document.getElementById("rmvNoOfCharsPerLine").addEventListener("click",(()=>{if("none"===de.style.display)de.style.display="inline-block",re.style.display="inline-block";else{const e=parseInt(de.value)||0,n=parseInt(re.value)||0,l=d.value.split("\n").map((t=>t.length<=e+n?"":t.slice(e,t.length-n)));d.value=l.join("\n"),t()}}));const ie=document.getElementById("findInput"),se=document.getElementById("replaceInput");document.getElementById("findAndReplaceText").addEventListener("click",(()=>{var e=ie.value;const n=se.value;e&&(e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),d.value=d.value.replace(e,n),t())})),document.getElementById("diffCompare").addEventListener("click",(()=>{window.open("diffCompare.html","_blank")})),document.getElementById("fullscreen").addEventListener("click",(()=>{document.fullscreenElement?(document.exitFullscreen(),d.style.height="300px"):(document.documentElement.requestFullscreen(),d.style.height="100vh")})),document.addEventListener("fullscreenchange",(()=>{document.fullscreenElement||(d.style.height="300px")})),document.getElementById("getDateTime").addEventListener("click",(function(){var e=new Date;const t=e.getDate(),n=e.getMonth()+1,l=e.getFullYear();e=e.toLocaleTimeString(),navigator.clipboard.writeText(`${t}/${n}/${l} ${e}`)})),d.addEventListener("input",(e=>{const t=e.target.selectionStart;var n=e.target.value.substring(0,t);"ss-"===n.split(/\s/).pop()&&(n=n.replace(/ss-$/,"ﷺ")+e.target.value.substring(t),e.target.value=n,e.target.setSelectionRange(t,t))})),document.querySelectorAll(".copy-button").forEach((e=>{e.addEventListener("click",(()=>{navigator.clipboard.writeText(e.dataset.text)}))})),document.querySelectorAll(".copy-button-lit").forEach((e=>{e.addEventListener("click",(()=>{navigator.clipboard.writeText(e.textContent)}))}));const ue=JSON.parse(localStorage.getItem("editorTabs"));ue&&(y=ue,y.forEach((e=>{if(1<e.id){const t=document.createElement("button");t.classList.add("numbered-tab"),t.dataset.tab=e.id,t.textContent=e.id,p.insertBefore(t,g)}})),n(parseInt(localStorage.getItem("currentTab"))||1)),setInterval((()=>{y[E-1].content=d.value,localStorage.setItem("editorTabs",JSON.stringify(y)),localStorage.setItem("currentTab",E)}),5e3),t()}));